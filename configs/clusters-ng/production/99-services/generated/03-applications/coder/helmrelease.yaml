{
   "apiVersion": "helm.toolkit.fluxcd.io/v2",
   "kind": "HelmRelease",
   "metadata": {
      "name": "coder",
      "namespace": "coder"
   },
   "spec": {
      "chart": {
         "spec": {
            "chart": "coder",
            "sourceRef": {
               "kind": "HelmRepository",
               "name": "coder"
            }
         }
      },
      "interval": "15m",
      "values": {
         "coder": {
            "env": [
               {
                  "name": "CODER_PG_CONNECTION_URL",
                  "valueFrom": {
                     "secretKeyRef": {
                        "key": "url",
                        "name": "coder-db"
                     }
                  }
               },
               {
                  "name": "CODER_ACCESS_URL",
                  "value": "https://coder.local.d20.fan"
               }
            ],
            "ingress": {
               "enable": true,
               "host": "coder.local.d20.fan",
               "tls": {
                  "enable": true
               }
            }
         }
      }
   }
}
